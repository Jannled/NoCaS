<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title> JannledModelFormat converter </title>
	<link rel="stylesheet" href="../webgl.css" type="text/css">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<script src="three_min.js"></script>
	<script src="OBJLoader2.js"></script>
	<script src="convert.js"></script>
</head>

<body>
	<script type="text/javascript">


/*		loader.load(
			// resource URL
			'../models/Cube.obj',
			// called when resource is loaded
			function ( object ) {
				vertices = object.children[0].geometry.attributes.position.array;
				normals = object.children[0].geometry.attributes.normal.array;
				uvs = object.children[0].geometry.attributes.uv.array;
				console.log("Object loaded: " + object.children.length);
			},
			// called when loading is in progresses
			function ( xhr ) {},
			// called when loading has errors
			function ( error ) {

				console.log( 'An error happened while loading ' );

			}
		);*/

		function download(filename)
		{
			var text = document.getElementById("objFile").value;

			var object = convertFromObj(text);
			var vertices = object.vertices;
			var normals = object.normals;
			var uvs = object.uvs;
			console.log("Model name: " + object);

			//Start download
			var element = document.createElement('a');
			element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			element.setAttribute('download', model.modelName + ".jmf");

			element.style.display = 'none';
			document.body.appendChild(element);

			element.click();

			document.body.removeChild(element);
		}
	</script>
		<!-- <input type="text" name="name" value="test.txt"> -->
		<textarea id="objFile" rows="30" cols="60" playceholder="Copy your OBJ here"></textarea>
		<button onclick="download('Test')">Download</button>
</body>

</html>
