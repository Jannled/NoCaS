<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title> JannledModelFormat converter </title>
	<link rel="stylesheet" href="../webgl.css" type="text/css">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<script src="three_min.js"></script>
	<script src="LoaderSupport.js"></script>
	<script src="OBJLoader2.js"></script>
	<script src="convert.js"></script>
</head>

<body>
	<script type="text/javascript">

		function convert()
		{
			var text = document.getElementById("objFile").value;

			var model = convertFromObj(text);
			var vertices = model.vertices;
			var normals = model.normals;
			var uvs = model.uvs;

			var jmf = convertToJMF(model.modelName, model.vertices, model.normals, model.uvs, model.indices);
			console.log("Model name: " + model.modelName);

			//Start download
			saveToBlob(jmf, model.modelName + ".jmf");
		}

		function saveToBlob(content, fileName)
		{
	    var a = document.createElement("a");
	    document.body.appendChild(a);
	    a.style = "display: none";
      var blob = new Blob([content], {type: "octet/stream"});
      var url = window.URL.createObjectURL(blob);
      a.href = url;
      a.download = fileName;
      a.click();
      window.URL.revokeObjectURL(url);
			document.body.removeChild(a);
    }

	</script>
		<!-- <input type="text" name="name" value="test.txt"> -->
		<textarea id="objFile" rows="30" cols="60" playceholder="Copy your OBJ here"></textarea>
		<button onclick="convert()">Download</button>
</body>

</html>
